import{objectSpread2 as e,slicedToArray as r,asyncToGenerator as t,regeneratorRuntime as a,defineProperty as n}from"./_virtual/_rollupPluginBabelHelpers.js";import s from"react";var o={service:function(e){},data:{},message:{},param:{type:"type",path:"path"}},c=function(r,t){return"SET"===t.type?e(e({},r),t.payload):{}},p=function(p){var u=new AbortController,i=e(e({},o),p),f=s.useState(!1),y=r(f,2),l=y[0],m=y[1],d=s.useReducer(c,{}),v=r(d,2),h=v[0],g=v[1],w=function(){var r=t(a().mark((function r(t){var n,s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e({service:i.service},t),s={ctr:u,data:i.data,parser:b(g)},m(!0),r.next=5,n.service(s);case 5:m(!1);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),b=function e(r){return function(t){Array.isArray(t)?t.forEach((function(t){return e(r)(t)})):i.hasOwnProperty("message")&&i.message.hasOwnProperty(t[i.param.type])&&r({type:"SET",payload:n({},t[i.param.path],i.message[t[i.param.type]](t))})}};return{processing:l,validate:w,message:function(e){return h[e]||""},error:function(e){return e?h.hasOwnProperty(e):0!==Object.keys(h).length},clear:function(){g({type:"CLEAR"})},cancel:function(){u.abort()}}};export{p as default};
